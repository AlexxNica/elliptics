.\" 2008+ Copyright (c) Evgeniy Polyakov <zbr@ioremap.net>
.\" All rights reserved.

.TH MAN 1 2013-07-10 "Linux" "Elliptics admin's guide"
.SH NAME
dnet_recovery \- recovery utility for elliptics
.SH SYNOPSIS
.B dnet_recovery [-hbdDgklLnNrsStem]
.I type
.SH DESCRIPTION
Recovery mechanism for elliptics that utilizes iterators and metadata.
It supports two recovery methods (
.I type
)
:
.B merge
and
.B dc.
Method
.B merge
is used for recovery within hash ring (aka group),
.B dc
is used for recovery across different hash rings thus maintaining replica counts.  More information about recovery process can be found at:

http://doc.reverbrain.com/elliptics:replication.
.SH OPTIONS
.TP
.B \-h, \-\-help
Show help message and exit.
.TP
.B \-b batch_size, \-\-batch-size=batch_size
Number of keys in read_bulk/write_bulk batch [default: 1024].
.TP
.B \-d, \-\-debug
Enable debug output [default: False].
.TP
.B \-D dir, \-\-dir=dir
Temporary directory for iterators' results [default: /var/tmp/dnet_recovery_%TYPE%].
.TP
.B \-g elliptics_groups, \-\-groups=elliptics_groups
Comma separated list of groups [default: all].
.TP
.B \-k lockfile, \-\-lock=lockfile
Lock file used for recovery [default: dnet_recovery.lock].
.TP
.B \-l file, \-\-log=file
Output log messages from library to file [default: dnet_recovery.log].
.TP
.B \-L elliptics_log_level, \-\-log-level=elliptics_log_level
Elliptics client verbosity [default: 1]. You can pass numbers from 0 to 4. 4 is the highest level of verbosity.
.TP
.B \-n nprocess, \-\-nprocess=nprocess
Number of subprocesses [default: 1].
.TP
.B \-N, \-\-dry-run
Enable test mode: only count diffs without recovering [default: False].
.TP
.B \-r host:port:family, \-\-remote=host:port:family
Address of a storage node, where
.I family
is either 2 (AF_INET) or 10 (AF_INET6). Example,
.I example.host:1025:2.
.TP
.B \-s STAT, \-\-stat=STAT
Statistics output format: none/text [default: text].
.TP
.B \-S, --safe
Do not remove recovered keys after merge [default: False].
.TP
.B \-t timestamp, \-\-time=timestamp
Recover keys modified since `time`. Can be specified as timestamp or as time difference e.g.: `1368940603`, `12h`, `1d`, or `4w` [default: 0].
.TP
.B \-e, \-\-no-exit
Will be waiting for user input at the finish.
.TP
.B \-m monitor_port, \-\-monitor-port=monitor_port
Enable remote monitoring on provided port [default: disabled].
.SH AUTHOR
Evgeniy Polyakov (zbr@ioremap.net)
.SH SEE ALSO
.P
.BR dnet_find (1),
.BR dnet_ioclient (1),
.BR dnet_ioserv (1),
.BR eblob_index_info (1),
.BR eblob_merge (1),
.BR eblob_regex_iter (1),
.P
Complete documentation on project you can find at http://doc.reverbrain.com.
